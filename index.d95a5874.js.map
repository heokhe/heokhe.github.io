{"mappings":"kBAAMA,EAAQ,IAAOC,SAASC,iBAAgB,aAExCC,EAAQ,CADCF,SAASG,cAAa,aACRJ,GACvBK,EAAWF,EAASG,KAAIC,GAAWA,EAAQC,aAAY,gBAAiBC,MAAK,OAwBT,MAGpEC,EAAST,SAASU,cAAa,UACrCD,EAAOE,MAAMC,SAAQ,QACrBH,EAAOE,MAAME,QAAS,EACtBb,SAASc,KAAKC,QAAQN,GACtBA,EAAOO,MAAQC,OAAOC,WACtBT,EAAOU,OAASF,OAAOG,kBAEjBC,EAAMZ,EAAOa,WAAU,MAC7BD,EAAIE,uBAAwB,QAEtBC,EAAgBC,IACpBJ,EAAIK,UAAYD,EAChBJ,EAAIM,SAAS,EAAG,EAAGV,OAAOC,WAAYD,OAAOG,cAEzCQ,EAAc,CAAIC,EAAGC,EAAGL,EAAOM,EAAMC,EAAU,WAC7CC,EAAIhB,OAAOC,WACXgB,EAAIjB,OAAOG,YACXe,EAAIC,KAAKC,IAAIJ,EAAIC,EAAG,GAE1Bb,EAAIiB,aAAaH,EAAG,EAAG,EAAG,EAAG,EAAE,SACzBI,EAAIlB,EAAImB,qBAAqBX,EAAIM,EAAGL,EAAG,EAAGD,EAAIM,EAAGL,EAAGI,EAAIH,GAC9DQ,EAAEE,aAAa,IAAMhB,GACrBc,EAAEE,aAAa,EAAGhB,EAAMiB,WAAU,KAAI,GAAOjB,MAAQ,eAErDJ,EAAIsB,YAAcX,EAClBX,EAAIK,UAAYa,EAChBlB,EAAIM,SAAS,EAAG,EAAGM,EAAGC,GACtBb,EAAIuB,sBAGqBC,EAAvBC,EAAU1C,EAAS,YAEd2C,EAAOC,EAAI,SACZf,EAAIhB,OAAOC,WACXgB,EAAIjB,OAAOG,YAEjBC,EAAI4B,UAAU,EAAG,EAAGhB,EAAGC,SAEjBF,EAAU,EAAII,KAAKc,IAAI,EAAIF,EAAG,GAEhCH,IACFxB,EAAIsB,YAAc,EAAIX,EACtBR,EAAcqB,EAAY,IAC1BjB,EAAeK,EAAG,EAAGY,EAAY,GAAI,GAAK,EAAIb,GAC9CJ,EAAe,EAAGM,EAAGW,EAAY,GAAI,GAAK,EAAIb,GAC9CJ,EAAeK,EAAGC,EAAGW,EAAY,GAAI,GAAK,EAAIb,IAG5Cc,IACFzB,EAAIsB,YAAcX,EAClBR,EAAcsB,EAAQ,IACtBlB,EAAeK,EAAG,EAAGa,EAAQ,GAAI,GAAKd,GACtCJ,EAAe,EAAGM,EAAGY,EAAQ,GAAI,GAAKd,GACtCJ,EAAeK,EAAGC,EAAGY,EAAQ,GAAI,GAAKd,QAItCmB,GAAU,WACLC,EAAQC,GACfF,GAAU,QAEJH,GAAKM,KAAKC,MAAQF,GAAa,IACrCN,EAAOC,GAEHG,GAAWH,EAAI,EAAGQ,uBAAqB,IAAOJ,EAAQC,KACrDF,GAAU,YA1FQM,SACjBC,EAAYxD,EAASG,KAAG,KAAO,QACjCsD,QACEC,EAAQ,IAAOC,sBAAqBC,cAC7BC,KAASD,EAAO,OACnBE,EAAQ9D,EAAS+D,QAAQF,EAAMG,QACrCR,EAAUM,GAASD,EAAMI,qBAGrBC,EAAcT,UACXU,EAAIX,EAAUY,OAAS,EAAGD,GAAK,EAAGA,IAAC,GACtCX,EAAUW,GAAC,CACbV,EAAgBzD,EAASmE,SAKzBV,IAAkBS,GAAaX,EAASE,EAAeS,MACxDG,UAAW,KAChBrE,EAASsE,SAAQlE,GAAWsD,EAASa,QAAQnE,KA0E/CoE,EAAe,CAAEpE,EAAS8D,KACpB9D,IACFuC,EAAczC,EAASF,EAAS+D,QAAQG,IACxCtB,EAAU1C,EAASF,EAAS+D,QAAQ3D,KAGtCN,SAASG,cAAa,0BAA2BwE,QAAU7B,EAAQ,GAE/DK,IAASA,GAAU,GACvBC,EAAQE,KAAKC,UAGftC,OAAO2D,iBAAgB,UAAS,KAC9BnE,EAAOO,MAAQC,OAAOC,WACtBT,EAAOU,OAASF,OAAOG,YAClB+B,GAASJ","sources":["js/background.js"],"sourcesContent":["const projects = [...document.querySelectorAll('.project')]\nconst header = document.querySelector('header')\nconst sections = [header, ...projects]\nconst palettes = sections.map(section => section.getAttribute('data-palette').split(','))\n\nfunction listenForScroll(callback) {\n  const visiblity = sections.map(() => false)\n  let activeSection;\n  const observer = new IntersectionObserver(entries => {\n    for (const entry of entries) {\n      const index = sections.indexOf(entry.target)\n      visiblity[index] = entry.isIntersecting\n    }\n    \n    const prevSection = activeSection;\n    for (let i = visiblity.length - 1; i >= 0; i--) {\n      if (visiblity[i]) {\n        activeSection = sections[i]\n        break;\n      }\n    }\n\n    if (activeSection !== prevSection) callback(activeSection, prevSection)\n  }, { threshold: 0.2 })\n  sections.forEach(section => observer.observe(section))\n}\n\n/** @link https://css-tricks.com/thing-know-gradients-transparent-black */\nconst betterTransparent = color => color.startsWith('#') ? `${color}00` : 'transparent'\n\nconst canvas = document.createElement('canvas')\ncanvas.style.position = 'fixed'\ncanvas.style.zIndex = -1\ndocument.body.prepend(canvas)\ncanvas.width = window.innerWidth\ncanvas.height = window.innerHeight\n\nconst ctx = canvas.getContext('2d')\nctx.imageSmoothingEnabled = true\n\nconst setBackground = color => {\n  ctx.fillStyle = color\n  ctx.fillRect(0, 0, window.innerWidth, window.innerHeight)\n}\nconst createGradient = (x, y, color, size, opacity = 1) => {\n  const w = window.innerWidth\n  const h = window.innerHeight\n  const k = Math.max(w / h, 1)\n\n  ctx.setTransform(k, 0, 0, 1, 0,0)\n  const g = ctx.createRadialGradient(x / k, y, 0, x / k, y, h * size)\n  g.addColorStop(0.05, color)\n  g.addColorStop(1, color.startsWith('#') ? `${color}00` : 'transparent')\n\n  ctx.globalAlpha = opacity\n  ctx.fillStyle = g\n  ctx.fillRect(0, 0, w, h)\n  ctx.resetTransform()\n}\n\nlet palette = palettes[0], prevPalette;\n\nfunction render(t = 1) {\n  const w = window.innerWidth\n  const h = window.innerHeight\n\n  ctx.clearRect(0, 0, w, h)\n\n  const opacity = 1 - Math.pow(1 - t, 3);\n\n  if (prevPalette) {\n    ctx.globalAlpha = 1 - opacity\n    setBackground(prevPalette[0])\n    createGradient(w, 0, prevPalette[1], 0.9, 1 - opacity)\n    createGradient(0, h, prevPalette[2], 0.8, 1 - opacity)\n    createGradient(w, h, prevPalette[3], 0.7, 1 - opacity)\n  }\n\n  if (palette) {\n    ctx.globalAlpha = opacity\n    setBackground(palette[0])\n    createGradient(w, 0, palette[1], 0.9, opacity)\n    createGradient(0, h, palette[2], 0.7, opacity)\n    createGradient(w, h, palette[3], 0.7, opacity)\n  }\n}\n\nlet pending = false\nfunction animate(startTime) {\n  pending = true\n\n  const t = (Date.now() - startTime) / 500\n  render(t)\n\n  if (pending && t < 1) requestAnimationFrame(() => animate(startTime))\n  else pending = false\n}\n\nlistenForScroll((section, prevSection) => {\n  if (section) {\n    prevPalette = palettes[sections.indexOf(prevSection)]\n    palette = palettes[sections.indexOf(section)]\n  }\n\n  document.querySelector('meta[name=theme-color]').content = palette[1]\n\n  if (pending) pending = false\n  animate(Date.now())\n})\n\nwindow.addEventListener('resize', () => {\n  canvas.width = window.innerWidth\n  canvas.height = window.innerHeight\n  if (!pending) render()\n})\n"],"names":["$f14d5357b31236889d44b6bfef62226d$var$projects","document","querySelectorAll","$f14d5357b31236889d44b6bfef62226d$var$sections","querySelector","$f14d5357b31236889d44b6bfef62226d$var$palettes","map","section","getAttribute","split","$f14d5357b31236889d44b6bfef62226d$var$canvas","createElement","style","position","zIndex","body","prepend","width","window","innerWidth","height","innerHeight","$f14d5357b31236889d44b6bfef62226d$var$ctx","getContext","imageSmoothingEnabled","$f14d5357b31236889d44b6bfef62226d$var$setBackground","color","fillStyle","fillRect","$f14d5357b31236889d44b6bfef62226d$var$createGradient","x","y","size","opacity","w","h","k","Math","max","setTransform","g","createRadialGradient","addColorStop","startsWith","globalAlpha","resetTransform","$f14d5357b31236889d44b6bfef62226d$var$prevPalette","$f14d5357b31236889d44b6bfef62226d$var$palette","$f14d5357b31236889d44b6bfef62226d$var$render","t","clearRect","pow","$f14d5357b31236889d44b6bfef62226d$var$pending","$f14d5357b31236889d44b6bfef62226d$var$animate","startTime","Date","now","requestAnimationFrame","callback","visiblity","activeSection","observer","IntersectionObserver","entries","entry","index","indexOf","target","isIntersecting","prevSection","i","length","threshold","forEach","observe","$f14d5357b31236889d44b6bfef62226d$var$listenForScroll","content","addEventListener"],"version":3,"file":"index.d95a5874.js.map"}